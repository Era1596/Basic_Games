<!DOCTYPE html>
<html>
<head>
    <title>Battleship Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }

        .container {
            border: 1px solid #ccc;
            padding: 20px;
            display: inline-block;
        }

        button {
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }

        .cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ccc;
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
        }

        .ship-button {
            margin: 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Battleship Game</h2>
        <div id="playerBoard"></div>
        <div id="opponentBoard"></div>
        <button onclick="startGame()">Start Game</button>
        <button onclick="placeShipsManually()">Place Ships Manually</button>
        <div>
            <button class="ship-button" onclick="selectShip(1)">Place 1x1 Ship (3 times)</button>
            <button class="ship-button" onclick="selectShip(2)">Place 2x1 Ship (2 times)</button>
            <button class="ship-button" onclick="selectShip(3)">Place 3x1 Ship (1 time)</button>
        </div>
    </div>

    <script>
        const boardSize = 8;
        const shipSizes = [3, 2, 2, 1, 1]; // Ship sizes
        let playerBoard = [];
        let opponentBoard = [];
        let selectedShip = 0;

        function createBoard(boardId) {
            let html = '';
            for (let i = 0; i < boardSize; i++) {
                boardId[i] = [];
                html += '<div>';
                for (let j = 0; j < boardSize; j++) {
                    boardId[i][j] = 0;
                    html += '<div class="cell" onclick="cellClick(' + i + ',' + j + ', \'' + boardId + '\')"></div>';
                }
                html += '</div>';
            }
            document.getElementById(boardId).innerHTML = html;
        }

        function startGame() {
            createBoard('playerBoard');
            createBoard('opponentBoard');
        }

        function cellClick(row, col, boardId) {
            let board;
            if (boardId === 'playerBoard') {
                board = playerBoard;
            } else if (boardId === 'opponentBoard') {
                board = opponentBoard;
                // Prevent opponent board clicks
                return;
            }

            if (board[row][col] === 0) {
                if (boardId === 'playerBoard') {
                    board[row][col] = 1;
                    let cell = document.getElementsByClassName('cell')[row * boardSize + col];
                    cell.style.backgroundColor = 'blue';
                    if (!checkWin(board, 1)) {
                        opponentMove();
                    }
                } else if (boardId === 'opponentBoard') {
                    if (opponentBoard[row][col] === 0) {
                        opponentBoard[row][col] = 1;
                        let cell = document.getElementsByClassName('cell')[row * boardSize + col + boardSize * boardSize];
                        cell.style.backgroundColor = 'blue';
                        if (!checkWin(board, 2)) {
                            // Oyuncunun sıradaki hamlesini yapmasını beklemek için bir mekanizma eklenmedi, burada işaretleme yapılıyor sadece.
                        }
                    }
                }
            }
        }

        function opponentMove() {
            // Implement opponent's move logic here using minimax or other strategies
            // For simplicity, I'll use random moves for demonstration purposes
            let randomRow = Math.floor(Math.random() * boardSize);
            let randomCol = Math.floor(Math.random() * boardSize);
            cellClick(randomRow, randomCol, 'opponentBoard');
        }

        function checkWin(board, player) {
            // Check for a win condition and return true if the player wins
            // Implement your win condition logic here
            return false;
        }

        function selectShip(shipSize) {
            selectedShip = shipSize;
            alert(`Select ${shipSize} consecutive cells on the board to place the ship.`);
        }

        function placeShipsManually() {
            alert("Click on the board cells to place your ships.");

            let placedShips = 0;
            document.getElementById('playerBoard').addEventListener('click', function(event) {
                if (placedShips < shipSizes.length && selectedShip > 0) {
                    let cell = event.target;
                    let row = Math.floor(Array.from(cell.parentNode.children).indexOf(cell) / boardSize);
                    let col = Array.from(cell.parentNode.children).indexOf(cell) % boardSize;

                    if (isValidPlacement(playerBoard, row, col, selectedShip)) {
                        for (let i = 0; i < selectedShip; i++) {
                            playerBoard[row][col + i] = 3; // Mark ship position as 3
                            let shipCell = document.getElementsByClassName('cell')[row * boardSize + col + i];
                            shipCell.style.backgroundColor = 'green';
                        }
                        placedShips++;
                        selectedShip = 0;
                        if (placedShips < shipSizes.length) {
                            alert(`Place ${shipSizes[placedShips]} consecutive cells on the board for the next ship.`);
                        } else {
                            alert("All ships have been placed.");
                            document.getElementById('playerBoard').removeEventListener('click', arguments.callee); // Remove event listener
                        }
                    } else {
                        alert("Invalid ship placement. Try again.");
                    }
                }
            });
        }

        function isValidPlacement(board, row, col, shipSize) {
            // Check if the ship can be placed in the given position
            for (let i = 0; i < shipSize; i++) {
                if (col + i >= boardSize || board[row][col + i] !== 0) {
                    return false;
                }
            }
            return true;
        }

        // ... (rest of the JavaScript code) ...
    </script>
</body>
</html>
