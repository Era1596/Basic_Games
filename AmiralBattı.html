<!DOCTYPE html>
<html>
<head>
    <title>Battleship Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }

        .container {
            border: 1px solid #ccc;
            padding: 20px;
            display: inline-block;
        }

        button {
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }

        .cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ccc;
            display: inline-block;
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Battleship Game</h2>
        <div id="board"></div>
        <button onclick="startGame()">Start Game</button>
        <button onclick="placeShipsManually()">Place Ships Manually</button>
    </div>

    <script>
        const boardSize = 8;
        let board = [];

        function createBoard() {
            let html = '';
            for (let i = 0; i < boardSize; i++) {
                board[i] = [];
                html += '<div>';
                for (let j = 0; j < boardSize; j++) {
                    board[i][j] = 0;
                    html += '<div class="cell" onclick="cellClick(' + i + ',' + j + ')"></div>';
                }
                html += '</div>';
            }
            document.getElementById('board').innerHTML = html;
        }

        function startGame() {
            createBoard();
        }

        function cellClick(row, col) {
            if (board[row][col] === 0) {
                board[row][col] = 1;
                document.getElementsByClassName('cell')[row * boardSize + col].style.backgroundColor = 'blue';
                if (!checkWin(1)) {
                    robotMove();
                    checkWin(2);
                }
            }
        }

        function robotMove() {
            let bestScore = -Infinity;
            let move;
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (board[i][j] === 0) {
                        board[i][j] = 2;
                        let score = minimax(board, 0, false);
                        board[i][j] = 0;
                        if (score > bestScore) {
                            bestScore = score;
                            move = { row: i, col: j };
                        }
                    }
                }
            }
            board[move.row][move.col] = 2;
            document.getElementsByClassName('cell')[move.row * boardSize + move.col].style.backgroundColor = 'red';
        }

        function checkWin(player) {
            // Check for a win condition and return true if the player wins
            // Implement your win condition logic here
            return false;
        }

        function minimax(board, depth, isMaximizing) {
            if (checkWin(1)) {
                return -1;
            }
            if (checkWin(2)) {
                return 1;
            }
            if (depth === 3) {
                return 0;
            }

            if (isMaximizing) {
                let maxScore = -Infinity;
                for (let i = 0; i < boardSize; i++) {
                    for (let j = 0; j < boardSize; j++) {
                        if (board[i][j] === 0) {
                            board[i][j] = 2;
                            let score = minimax(board, depth + 1, false);
                            board[i][j] = 0;
                            maxScore = Math.max(score, maxScore);
                        }
                    }
                }
                return maxScore;
            } else {
                let minScore = Infinity;
                for (let i = 0; i < boardSize; i++) {
                    for (let j = 0; j < boardSize; j++) {
                        if (board[i][j] === 0) {
                            board[i][j] = 1;
                            let score = minimax(board, depth + 1, true);
                            board[i][j] = 0;
                            minScore = Math.min(score, minScore);
                        }
                    }
                }
                return minScore;
            }
        }

        function placeShipsManually() {
            alert("Click on the board cells to place your ships.");

            let placedShips = 0;
            let currentShipSize = shipSizes[placedShips];
            document.getElementById('board').addEventListener('click', function(event) {
                if (placedShips < shipSizes.length) {
                    let cell = event.target;
                    let row = Math.floor(Array.from(cell.parentNode.children).indexOf(cell) / boardSize);
                    let col = Array.from(cell.parentNode.children).indexOf(cell) % boardSize;

                    if (isValidPlacement(row, col, currentShipSize)) {
                        for (let i = 0; i < currentShipSize; i++) {
                            if (i === 0) {
                                board[row][col + i] = 3; // Mark ship position as 3
                            } else {
                                board[row][col + i] = 4; // Mark rest of the ship positions as 4
                            }
                            let shipCell = document.getElementsByClassName('cell')[row * boardSize + col + i];
                            shipCell.style.backgroundColor = 'green';
                        }
                        placedShips++;
                        if (placedShips < shipSizes.length) {
                            currentShipSize = shipSizes[placedShips];
                        }
                    }

                    if (placedShips === shipSizes.length) {
                        alert("All ships have been placed.");
                        document.getElementById('board').removeEventListener('click', arguments.callee); // Remove event listener
                    }
                }
            });
        }
    </script>
</body>
</html>
